<div class="row" id="Page_onlineTaskDistribute">
    <div class="col-md-12">
        <div class="box">
            <form id="JS_queryOnlineTaskForm">
                <div class="box-header with-border">
                    <h3 class="box-title">按条件查询</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>任务名称</label>
                                <input type="text" class="form-control input-sm" name="taskName" placeholder="请输入任务名称">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>变更计划名称</label>
                                <select name="onlinePlan" class="form-control input-sm" data-url="getOnlinePlanList" data-idkey="onlinePlan" data-namekey="onlinePlanName">
                                    <option value="">请选择</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label>任务状态</label>
                                <select name="dealState" class="form-control input-sm">
                                    <option value="">请选择</option>
                                    <option value="1">未分派</option>
                                    <option value="2">处理中</option>
                                    <option value="3">完成</option>
                                    <option value="4">不需分派</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box-footer">
                    <div class="text-center">
                        <button type="reset" class="btn btn-default">重置</button>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary" data-toggle="modal" name="query">查询</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="box" id="JS_getOnlineTaskList">
            <div class="box-header ">
                <h3 class="box-title">变更计划列表</h3>
                <div class="box-tools">
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary" name="distribute">子任务分派</button>
                    </div>
                </div>
            </div>
            <div class="box-body table-scrollable">
                <table class="table table-bordered table-hover" style="width: 1630px;">
                    <thead>
                        <tr>
                            <th class="iCheckbox"></th>
                            <th>变更计划名称</th>
                            <th>任务名称</th>
                            <th>任务类型</th>
                            <th>处理状态</th>
                            <th>创建人</th>
                            <th>处理人</th>
                            <th>创建时间</th>
                        </tr>
                    </thead>
                    <tbody name="content"></tbody>
                </table>
            </div>
            <div class="box-footer no-border">
                <div class="dataTables_paginate" name="pagination"></div>
            </div>
        </div>
    </div>
</div>
<!-- 查看子任务分派弹出框 -->
<div class="modal fade" id="Modal_getOnlineTaskDistributeModal">
    <div class="modal-dialog modal-lg">
        <!--弹框步骤1-->
        <div class="modal-content" data-steps="1">
            <div class="modal-header">
                <button type="button" class="close" name="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">回归子任务分派</h4>
            </div>
            <div class="modal-body" style="padding-bottom: 0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box">
                            <form id="JS_addOnlineTaskDistributeForm">
                                <div class="box-header with-border">
                                    <h3 class="box-title">新增子任务分派</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="box-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>任务名称</label><i class="text-red">*</i>
                                                <input type="text" class="form-control input-sm" name="taskName" placeholder="请输入任务名称">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>关联用例集</label><i class="text-red">*</i>
                                                <select name="collectId" class="form-control input-sm" data-cmd="caseType=1" data-url="getCollectIdList" data-idkey="collectId" data-namekey="collectName">
                                                    <input type="hidden" name="onlinePlan" value="">
                                                    <input type="hidden" name="taskId" value="">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>处理人</label><i class="text-red">*</i>
                                                <select name="dealOpId" class="form-control input-sm" data-url="getDealOpIdList" data-idkey="dealOpId" data-namekey="dealOpName">
                                                    <option value="">请选择</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div class="form-group">
                                                <label></label>
                                                <button type="button" class="btn btn-primary" data-toggle="modal" name="save">保存</button>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div class="form-group">
                                                <label></label>
                                                <button type="reset" class="btn btn-default" name="reset">重置</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="box" id="JS_getOnlineTaskDistributeList">
                            <div class="box-header ">
                                <h3 class="box-title">子任务列表</h3>
                                <div class="box-tools">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-primary" name="update">修改</button>
                                        <button type="button" class="btn btn-primary" name="del">删除</button>
                                        <button type="button" class="btn btn-primary" name="checkResult">查看用例执行结果</button>
                                    </div>
                                </div>
                            </div>
                            <div class="box-body table-scrollable">
                                <table class="table table-bordered table-condensed table-hover" style="width: 1630px;">
                                    <thead>
                                        <tr>
                                            <th class="iCheckbox" width="15"></th>
                                            <th>任务名称</th>
                                            <th>任务类型</th>
                                            <th>处理状态</th>
                                            <th>关联用例集</th>
                                            <th>处理人</th>
                                            <th>创建时间</th>
                                            <th>分派时间</th>
                                        </tr>
                                    </thead>
                                    <tbody name="content"></tbody>
                                </table>
                            </div>
                            <div class="box-footer no-border">
                                <div class="dataTables_paginate" name="pagination"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--弹框步骤2-->
        <div class="modal-content hide" data-steps="2">
            <div class="modal-header">
                <button type="button" class="close" name="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">
                    <a class="btn btn-social-icon btn-bitbucket btn-primary btn-sm" data-gostep="1" title="返回"><i class="fa fa-arrow-left"></i></a>&nbsp;用例执行情况
                </h4>
            </div>
            <div class="modal-body" style="padding-bottom: 0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box" id="JS_getManualResultList" style="min-height:100px;">
                            <div class="box-header ">
                                <h3 class="box-title">手工用例执行结果</h3>
                            </div>
                            <div class="box-body table-scrollable">
                                <table class="table table-bordered table-condensed table-hover" style="width: 1630px;">
                                    <thead>
                                        <tr>
                                            <th>用例名称</th>
                                            <th>处理结果</th>
                                            <th>缺陷</th>
                                            <th>系统大类</th>
                                            <th>系统子类</th>
                                            <th>功能点</th>
                                            <th>重要程度</th>
                                            <th>用例操作说明</th>
                                            <th>预期结果</th>
                                            <th>处理状态</th>
                                        </tr>
                                    </thead>
                                    <tbody name="content"></tbody>
                                </table>
                            </div>
                            <div class="box-footer no-border">
                                <div class="dataTables_paginate" name="pagination"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--弹框步骤3-->
        <div class="modal-content hide" data-steps="3">
            <div class="modal-header">
                <button type="button" class="close" name="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">
                    <a class="btn btn-social-icon btn-bitbucket btn-primary btn-sm" data-gostep="1" title="返回"><i class="fa fa-arrow-left"></i></a>&nbsp;用例执行情况
                </h4>
            </div>
            <div class="modal-body" style="padding-bottom: 0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box" id="JS_getAutoResultList" style="min-height:100px;">
                            <div class="box-header ">
                                <h3 class="box-title">自动化用例执行结果</h3>
                            </div>
                            <div class="box-body table-scrollable">
                                <table class="table table-bordered table-condensed table-hover" style="width: 1630px;">
                                    <thead>
                                        <tr>
                                            <th>用例名称</th>
                                            <th>处理结果</th>
                                            <th>缺陷</th>
                                            <th>系统大类</th>
                                            <th>系统子类</th>
                                            <th>功能点</th>
                                            <th>重要程度</th>
                                            <th>处理状态</th>
                                            <th>自动化编号</th>
                                            <th>自动化执行结果</th>
                                        </tr>
                                    </thead>
                                    <tbody name="content"></tbody>
                                </table>
                            </div>
                            <div class="box-footer no-border">
                                <div class="dataTables_paginate" name="pagination"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->

<!--22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222-->
<!-- Modal -->
<!-- 查看子任务分派弹出框 -->
<div class="modal fade" id="JS_getPerSubtaskAssignmentModal">
    <div class="modal-dialog modal-lg">
        <!--弹框步骤1-->
        <div class="modal-content" data-steps="1">
            <div class="modal-header">
                <button type="button" class="close" name="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">回归子任务分派</h4>
            </div>
            <div class="modal-body" style="padding-bottom: 0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box">
                            <form id="JS_addPerSubtaskAssignmentForm">
                                <div class="box-header with-border">
                                    <h3 class="box-title">新增子任务分派</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="box-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>计划名称</label><i class="text-red">*</i>
                                                <input type="text" class="form-control input-sm" name="onlinePlanName" value="" readonly="readonly">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>父任务名称</label><i class="text-red">*</i>
                                                <input type="text" class="form-control input-sm" name="parentTaskName" value="" readonly="readonly">
                                                <input type="hidden" name="onlinePlan" value="">
                                                <input type="hidden" name="parentTaskId" value="{{taskId}}">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>任务名称</label><i class="text-red">*</i>
                                                <input type="text" class="form-control input-sm" name="taskName" value="" placeholder="请输入任务名称">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>子任务类型</label><i class="text-red">*</i>
                                                <select name="taskType" class="form-control input-sm">
                                                    <option value="">请选择</option>
                                                    <option value="4">按需测试</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="box-footer">
                                    <div class="text-center">
                                        <button type="reset" class="btn btn-default" name="reset">重置</button>
                                        &nbsp;&nbsp;&nbsp;&nbsp;
                                        <button type="button" class="btn btn-primary" data-toggle="modal" name="save">保存</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="box" id="JS_getPerSubtaskAssignmentList" style="min-height:100px;">
                            <div style="text-align: center; padding: 50px 0;">
                                <p style="font-size: 38px;"><i class="fa fa-hourglass-1  text-gray"></i></p>
                                <p style="color: #333;"><span>数据加载中，请稍后...</span></p>
                            </div>
                        </div>
                        <div class="box" id="JS_getInterfaceList" style="min-height:100px;">
                            <div style="text-align: center; padding: 50px 0;">
                                <p style="font-size: 38px;"><i class="fa fa-hourglass-1  text-gray"></i></p>
                                <p style="color: #333;"><span>数据加载中，请稍后...</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--弹框步骤2-->
        <div class="modal-content hide" data-steps="2">
            <div class="modal-header">
                <button type="button" class="close" name="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">
                    <a class="btn btn-social-icon btn-bitbucket btn-primary btn-sm" data-gostep="1" title="返回"><i class="fa fa-arrow-left"></i></a>&nbsp;分派任务
                </h4>
            </div>
            <form id="JS_addpProcessing">
                <div class="modal-body" style="padding-bottom: 0">
                    <div class="row">
                        <div class="col-sm-2 form-group"></div>
                        <div class="col-sm-6 form-group">
                            <label for="collectName" class="col-sm-4 control-label">任务名称：</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="taskName" name="taskName" value="">
                                <input type="hidden" class="form-control" id="taskId" name="taskId" value="">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-2 form-group"></div>
                        <div class="col-sm-6 form-group">
                            <label for="dealOpId" class="col-sm-4 control-label">处理人：</label>
                            <div class="col-sm-8">
                                <select name="dealOpId" class="form-control input-sm" data-url="getDealOpIdList" data-idkey="dealOpId" data-namekey="dealOpName">
                                    <option value="">请选择</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="reset" class="btn btn-default" name="reset">重置</button>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary" data-toggle="modal" name="save">保存</button>
                    </div>
                </div>
            </form>
        </div>
        <!--弹框步骤3-->
    </div>
</div>
<!--22222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222-->
<script id="TPL_getOnlineTaskList" type="text/x-handlebars-template">
    {{#each this}}
    <tr>
        <td>
            <input type="radio" class="minimal" value="{{onlinePlan}}" name="onlinePlan">
            <input type="hidden" name="taskId" value="{{taskId}}">
        </td>
        <td>
            <input type="hidden" name="onlinePlanName" value="{{onlinePlanName}}">{{onlinePlanName}}</td>
        <td>
            <input type="hidden" name="taskName" value="{{taskName}}">{{taskName}}</td>
        <td>
            <input type="hidden" name="taskType" value="{{taskType}}">{{getParentTaskType taskType}}</td>
        <td>{{getDealState dealState}}</td>
        <td>{{assignName}}</td>
        <td>
            <input type="hidden" name="dealName" value="{{dealName}}">{{dealName}}</td>
        <td>{{assignDate}}</td>
    </tr>
    {{/each}}
</script>
<script id="TPL_getOnlineTaskDistributeList" type="text/x-handlebars-template">
    {{#each this}}
    <tr>
        <td>
            <input type="checkbox" class="minimal" value="{{taskId}}" name="taskId">
        </td>
        <td>
            <input type="hidden" name="taskName" value="{{taskName}}">{{taskName}}</td>
        <td>
            <input type="hidden" name="taskType" value="{{taskType}}">{{getTaskType taskType}}</td>
        <td>{{getState state}}</td>
        <td>
            <input type="hidden" name="collectId" value="{{collectId}}">{{collectName}}</td>
        <td>
            <input type="hidden" name="dealOpId" value="{{dealOpId}}">{{dealOpName}}</td>
        <td>{{assignDate}}</td>
        <td>{{assignDate}}</td>
    </tr>
    {{/each}}
</script>
<script id="TPL_getManualResultList" type="text/x-handlebars-template">
    {{#each this}}
    <tr>
        <td>{{testName}}</td>
        <td>{{result}}</td>
        <td>{{bug}}</td>
        <td>{{sysName}}</td>
        <td>{{subSysName}}</td>
        <td>{{funName}}</td>
        <td>{{getImportant important}}</td>
        <td>{{testDesc}}</td>
        <td>{{preResult}}</td>
        <td>{{getCaseState caseState}}</td>
    </tr>
    {{/each}}
</script>
<script id="TPL_getAutoResultList" type="text/x-handlebars-template">
    {{#each this}}
    <tr>
        <td>{{autoName}}</td>
        <td>{{result}}</td>
        <td>{{bug}}</td>
        <td>{{sysName}}</td>
        <td>{{subSysName}}</td>
        <td>{{funName}}</td>
        <td>{{getImportant important}}</td>
        <td>{{getCaseState caseState}}</td>
        <td>{{autoCode}}</td>
        <td>{{autoResult}}</td>
    </tr>
    {{/each}}
</script>
<script id="TPL_getPerSubtaskAssignmentList" type="text/x-handlebars-template">
    <div class="box-header ">
        <h3 class="box-title">非功能子任务列表</h3>
        <div class="box-tools">
            <div class="btn-group">
                <button type="button" class="btn btn-primary" name="update"><i class="fa fa-gears"></i>修改</button>
                <button type="button" class="btn btn-danger" name="del"><i class="fa fa-remove"></i> 删除</button>
                <button type="button" class="btn btn-info" name="processing"><i class="fa fa-search"></i> 分派处理</button>
            </div>
        </div>
    </div>
    <div class="box-body">
        <table class="table table-bordered table-condensed table-hover" style="width: 1630px;">
            <thead>
                <tr>
                    <th class="iCheckbox"></th>
                    <th>任务名称</th>
                    <th>任务类型</th>
                    <th>处理状态</th>
                    <th>处理人</th>
                    <th>创建时间</th>
                    <th>分派时间</th>
                </tr>
            </thead>
            <tbody>
                {{#each content}}
                <tr>
                    <td>
                        <input type="radio" class="minimal" value="{{taskId}}" name="taskId">
                    </td>
                    <td>
                        <input type="hidden" name="taskName" value="{{taskName}}">{{taskName}}</td>
                    <td>
                        <input type="hidden" name="taskType" value="{{taskType}}">{{TaskTypes taskType}}</td>
                    <td>
                        <input type="hidden" name="dealState" value="{{dealState}}">{{getDealState dealState}}</td>
                    <td>
                        <input type="hidden" name="opName" value="{{opName}}">{{opName}}</td>
                    <td>{{createDate}}</td>
                    <td>{{assignDate}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</script>
<script id="TPL_getInterfaceList" type="text/x-handlebars-template">
    <div class="box-header ">
        <h3 class="box-title">计划接口列表</h3>
        <form id="JS_queInterfaceForm">
            <div class="form-group form-inline">
                <label>&nbsp;&nbsp;&nbsp;&nbsp;接口编号：</label>
                <input type="text" class="form-control input-sm" name="serviceId" value="">
                <label>接口名称：</label>
                <input type="text" class="form-control input-sm " name="serviceName" value="">
                <label>是否已分派：</label>
                <select name="state" class="form-control input-sm" style="width:172px">
                    <option value="">请选择</option>
                    <option value="1">是</option>
                    <option value="2">否</option>
                </select>
            </div>
            <div class="form-group form-inline">
                <label>需求管理员：</label>
                <input type="text" class="form-control input-sm" name="requireMan" value="">
                <button type="button" class="btn btn-primary" data-toggle="modal" name="search">搜索</button>
                <button type="button" class="btn btn-primary" data-toggle="modal" name="relation">关联接口</button>
                <button type="button" class="btn btn-primary" data-toggle="modal" name="delRelation">删除关联接口</button>
            </div>
        </form>
    </div>
    <div class="box-body">
        <table class="table table-bordered table-condensed table-hover" style="width: 1630px;">
            <thead>
                <tr>
                    <th class="iCheckbox"></th>
                    <th>接口编号</th>
                    <th>接口名称</th>
                    <th>需求编号</th>
                    <th>变更类型</th>
                    <th>是否已分派</th>
                    <th>开发人员</th>
                    <th>需求管理员</th>
                </tr>
            </thead>
            <tbody>
                {{#each content}}
                <tr>
                    <td>
                        <input type="checkbox" class="minimal" value="{{id}}" name="id">
                    </td>
                    <td>
                        <input type="hidden" name="serviceId" value="{{serviceId}}">{{serviceId}}</td>
                    <td>
                        <input type="hidden" name="serviceName" value="{{serviceName}}">{{serviceName}}</td>
                    <td>
                        <input type="hidden" name="requireCode" value="{{requireCode}}">{{requireCode}}</td>
                    <td>
                        <input type="hidden" name="changeType" value="{{changeType}}">{{changeType}}</td>
                    <td>{{states state}}</td>
                    <td>{{devMan}}</td>
                    <td>{{requireMan}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</script>
<script>
seajs.use("script/netFlowManage/netFlow/onlineTaskDistribute.js", function(Query) {
    Query.init();
});
</script>
