<div class="row" id="Page_changeplanStart">
    <div class="col-md-12">
        <div class="box">
            <form id="JS_queryChangePlanForm">
                <div class="box-header with-border">
                    <h3 class="box-title">按条件查询</h3>
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                    </div>
                </div>
                <div class="box-body">
                    <div class="row">
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>变更计划名称</label>
                                <select name="onlinePlan" class="form-control input-sm" data-url="getOnlinePlanList" data-idkey="onlinePlan" data-namekey="onlinePlanName">
                                    <option value="">请选择</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>计划状态</label>
                                <select name="planState" class="form-control input-sm">
                                    <option value="">请选择</option>
                                    <option value="1">新建</option>
                                    <option value="2">处理中</option>
                                    <option value="3">完成</option>
                                    <option value="4">取消</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>变更类型</label>
                                <select name="types" class="form-control input-sm">
                                    <option value="">请选择</option>
                                    <option value="0">计划上线</option>
                                    <option value="1">紧急上线</option>
                                    <option value="2">计划变更</option>
                                    <option value="3">紧急变更</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>起始时间</label>
                                <input type="text" class="form-control input-sm " name="time1" id="JS_createDate" onClick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" placeholder="请选择起始时间">
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <label>终止时间</label>
                                <input type="text" class="form-control input-sm " name="time2" id="JS_doneDate" onClick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" placeholder="请选择终止时间">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="box-footer">
                    <div class="text-center">
                        <button type="reset" class="btn btn-default">重置</button>
                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <button type="button" class="btn btn-primary" data-toggle="modal" name="query">查询</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="box" id="JS_getChangePlanList" style="min-height:100px;">
            <div style="text-align: center; padding: 50px 0;">
                <p style="font-size: 38px;"><i class="fa fa-hourglass-1  text-gray"></i></p>
                <p style="color: #333;"><span>数据加载中，请稍后...</span></p>
            </div>
        </div>
    </div>
</div>
<!-- 查看自动化执行结果详细信息弹出框 -->
<div class="modal fade" id="Modal_getAutoResultModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">功能验收自动化验证</h4>
            </div>
            <div class="modal-body" style="padding-bottom: 0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box" id="JS_getAutoResultListC" style="min-height:100px;">
                            <div style="text-align: center; padding: 50px 0;">
                                <p style="font-size: 38px;"><i class="fa fa-hourglass-1  text-gray"></i></p>
                                <p style="color: #333;"><span>数据加载中，请稍后...</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<!-- 查看编译发布详细信息弹出框 -->
<div class="modal fade" id="Modal_getPublishResultModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">编译发布结果</h4>
            </div>
            <div class="modal-body" style="padding-bottom: 0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box" id="JS_getPublishResultList" style="min-height:100px;">
                            <div style="text-align: center; padding: 50px 0;">
                                <p style="font-size: 38px;"><i class="fa fa-hourglass-1  text-gray"></i></p>
                                <p style="color: #333;"><span>数据加载中，请稍后...</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<!-- 启动弹出框 -->
<div class="modal fade" id="Modal_getTaskResultModal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" name="close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">新增验收任务</h4>
            </div>
            <div class="modal-body" style="padding-bottom: 0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box">
                            <form id="JS_saveTaskResultForm">
                                <div class="box-header with-border">
                                    <h3 class="box-title">任务分派</h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                                        </button>
                                        <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                                    </div>
                                </div>
                                <div class="box-body">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>验收任务类型</label><i class="text-red">*</i>
                                                <select name="taskType" class="form-control input-sm">
                                                    <option value="">请选择</option>
                                                    <option value="1">前台功能验收</option>
                                                    <option value="2">后台功能验收</option>
                                                    <option value="3">非功能验收</option>
                                                </select>
                                                <input type="hidden" name="onlinePlan" value="">
                                                <input type="hidden" name="onlinePlanName" value="">
                                                <input type="hidden" name="taskId" value="">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>处理人</label>
                                                <select name="dealOpId" class="form-control input-sm" data-url="getDealOpIdList" data-idkey="dealOpId" data-namekey="dealOpName">
                                                    <option value="">请选择</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div class="form-group">
                                                <label></label>
                                                <button type="button" class="btn btn-primary" data-toggle="modal" name="save">保存</button>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                            <div class="form-group">
                                                <label></label>
                                                <button type="reset" class="btn btn-default" name="reset">重置</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div class="box" id="JS_getTaskResultList" style="min-height:100px;">
                            <div style="text-align: center; padding: 50px 0;">
                                <p style="font-size: 38px;"><i class="fa fa-hourglass-1  text-gray"></i></p>
                                <p style="color: #333;"><span>数据加载中，请稍后...</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<script id="TPL_getChangePlanList" type="text/x-handlebars-template">
    <div class="box-header ">
        <h3 class="box-title">变更计划列表</h3>
        <div class="box-tools">
            <button type="button" class="btn btn-primary" name="generate"><i class="fa fa-gears"></i> 编译发布</button>
            <button type="button" class="btn btn-primary" name="start"><i class="fa fa-flash"></i> 启动</button>
            <button type="button" class="btn btn-primary" name="checkResultA"><i class="fa fa-search"></i> 查看用例执行结果</button>
            <button type="button" class="btn btn-primary" name="checkResultC"><i class="fa fa-search"></i> 查看编译发布结果</button>
        </div>
    </div>
    <div class="box-body">
        <table class="table table-bordered table-hover" style="width: 1630px;">
            <thead>
                <tr>
                    <th class="iCheckbox"></th>
                    <th>变更计划名称</th>
                    <th>计划状态</th>
                    <th>类型</th>
                    <th>上线是否及时</th>
                    <th>自动化执行结果是否成功</th>
                    <th>是否编译发布完成</th>
                    <th>完成时间</th>
                    <th>计划变更时间</th>
                    <th>创建人</th>
                    <th>创建时间</th>
                </tr>
            </thead>
            <tbody>
                {{#each content}}
                <tr>
                    <td>
                        <input type="radio" class="minimal" value="{{onlinePlan}}" name="onlinePlan">
                    </td>
                    <td>
                        <input type="hidden" name="onlinePlanName" value="{{onlinePlanName}}">{{onlinePlanName}}</td>
                    <td>
                        <input type="hidden" name="planState" value="{{planState}}">{{getPlanState planState}}</td>
                    <td>
                        <input type="hidden" name="types" value="{{types}}">{{getTypes types}}</td>
                    <td>{{getTimely timely}}</td>
                    <td></td>
                    <td></td>
                    <td>{{doneDate}}</td>
                    <td>
                        <input type="hidden" name="planDate" value="{{planDate}}">{{planDate}}</td>
                    <td>{{createName}}</td>
                    <td>{{createDate}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</script>
<script id="TPL_getAutoResultListC" type="text/x-handlebars-template">
    <div class="box-header ">
        <h3 class="box-title">自动化用例执行结果</h3>
    </div>
    <div class="box-body">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>用例名称</th>
                    <th>系统大类</th>
                    <th>系统子类</th>
                    <th>功能点</th>
                    <th>自动化执行结果</th>
                </tr>
            </thead>
            <tbody>
                {{#each content}}
                <tr>
                    <td>{{caseName}}</td>
                    <td>{{sysName}}</td>
                    <td>{{subSysName}}</td>
                    <td>{{funName}}</td>
                    <td>{{getResulr resulr}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</script>
<script id="TPL_getTaskResultList" type="text/x-handlebars-template">
    <div class="box-header ">
        <h3 class="box-title">验收任务列表</h3>
        <div class="box-tools">
            <button type="button" class="btn btn-primary" name="update"><i class="fa fa-gears"></i> 修改</button>
            <button type="button" class="btn btn-primary" name="del"><i class="fa fa-remove"></i> 删除</button>
        </div>
    </div>
    <div class="box-body">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th class="iCheckbox"></th>
                    <th>验收任务名称</th>
                    <th>任务类型</th>
                    <th>处理状态</th>
                    <th>处理人</th>
                </tr>
            </thead>
            <tbody>
                {{#each this}}
                <tr>
                    <td>
                        <input type="radio" class="minimal" name="taskId" value="{{taskId}}">
                    </td>
                    <td>{{taskName}}</td>
                    <td>
                        <input type="hidden" name="taskType" value="{{taskType}}">{{getTaskType taskType}}</td>
                    <td>{{getDealState dealState}}</td>
                    <td>
                        <input type="hidden" name="dealOpId" value="{{dealOpId}}">
                        </ins>{{dealName}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</script>
<script id="TPL_getPublishResultList" type="text/x-handlebars-template">
    <div class="box-header ">
        <h3 class="box-title">编译发布结果</h3>
    </div>
    <div class="box-body">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>系统名称</th>
                    <th>模块名称</th>
                    <th>是否编译完成</th>
                </tr>
            </thead>
            <tbody>
                {{#each content}}
                <tr>
                    <td>{{sysName}}</td>
                    <td>{{modelName}}</td>
                    <td>{{getIsFinished isFinished}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>
</script>
<script>
seajs.use("script/netFlowManage/changePlan/changeplanStart.js", function(Query) {
    Query.init();
});
</script>
